{% extends ':admin:base_admin.html.twig' %}

{% block content %}
    <ul class="breadcrumb">
        <li><a href="{{ path('admin_home') }}">Home</a></li>
        <li><a href="{{ path('admin_nav_home') }}">Navs</a></li>
        <li><a href="">Nav {{ nav.name }}</a></li>
        <li class="active">Add content</li>
    </ul>

    <div class="row margin-vertical-md">
        <div class="col-md-12">
            <h1 class="h-btn-line">
                Add content nav {{ nav.name }}
            </h1>
        </div>
    </div>

    {% for flash_message in app.session.flashbag.get('error') %}
        <div class="alert alert-dismissible alert-danger">
            <button type="button" class="close" data-dismiss="alert">x</button>
            <strong>Well done!</strong> {{ flash_message }}.
        </div>
    {% endfor %}

    <div class="row margin-vertical-md">
        <div class="col-md-5">

            <div class="panel panel-default">
                <div class="panel-body">
                    Select content

                    {{ form_start(form_category) }}
                        {{ form_widget(form_category) }}
                        <button type="submit" class="btn btn-primary btn-xs btn-block"> Add category</button>
                    {{ form_end(form_category) }}

                    {{ form_start(form_page) }}
                        {{ form_widget(form_page) }}
                        <button type="submit" class="btn btn-primary btn-xs btn-block"> Add page</button>
                    {{ form_end(form_page) }}

                </div>
            </div>

        </div>
        <div class="col-md-6 col-md-offset-1">
            <table class="table table-striped table-hover ">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                    {% for key,item in contents %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ item.name }} <span class="label label-success">{{ item.type }}</span></td>
                            <td>
                                <a href="{{ path('admin_nav_remove_content', {'id': nav.id, 'keyArray': key}) }}" class="btn btn-primary btn-xs"><i class="fa fa-trash"></i></a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="3"> -- </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>

            {{ form_start(formSession) }}
                {{ form_errors(formSession) }}
                <table class="table table-striped table-hover ">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Parent</th>
                        <th>Sort</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for key,item in contents %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ item.name }} <span class="label label-success">{{ item.type }}</span></td>
                            {% set parent = 'parent_id' ~ key %}
                            <td>{{ form_row(attribute(formSession,parent)) }}</td>
                            {% set sort = 'sort' ~ key %}
                            <td>{{ form_row(attribute(formSession,sort)) }}</td>
                            <td>
                                <a href="{{ path('admin_nav_remove_content', {'id': nav.id, 'keyArray': key}) }}" class="btn btn-primary btn-xs"><i class="fa fa-trash"></i></a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="3"> -- </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <button type="submit" class="btn btn-primary btn-xs btn-block"> Add page</button>
            {{ form_end(formSession) }}
        </div>
    </div>


{% endblock %}
